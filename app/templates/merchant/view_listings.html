{% extends 'layouts/listings.html' %}
{% import 'macros/form_macros.html' as f %}

{% block before %}
    {% set flashes = {
        'error':   get_flashed_messages(category_filter=['form-error']),
        'warning': get_flashed_messages(category_filter=['form-check-email']),
        'info':    get_flashed_messages(category_filter=['form-info']),
        'success': get_flashed_messages(category_filter=['form-success'])
     } %}


    <form class="ui form segment">
        <div class="twelve wide field">
            <label>Search names and descriptions</label>
            <input value="{{ main_search_term }}" type="text" name="main-search" placeholder="e.g. corned beef">
        </div>

        <div class="inline field">
            <div class="ui checkbox">
                {% if favorite %}
                    {% set checked = 'checked="checked"' %}
                {% endif %}
                <input type="checkbox" name="favorite" tabindex="0" {{ checked }}>
                <label>Only show favorites</label>
            </div>
        </div>

         {% if not name_search_term %}
             {% set display = 'display:none' %}
         {% endif %}
        <div class="twelve wide field" id="advanced-search" style="{{ display }}">
            <label>Search company and vendor names</label>
            <input value="{{ name_search_term }}"type="text" name="name-search" placeholder="e.g. John's corned beef">
        </div>
        <div>
            <a href="#" id="toggle-advanced">Toggle advanced search</a>
        </div>
        <br>
        <button class="ui button" type="submit">Search</button>
    </form>
    {#    <form class="ui form">#}
    {#        <div class="ui fluid action input">#}
    {#            <input type="text" placeholder="Search item names and descriptions...">#}
    {#            <div class="ui button">Search </div>#}
    {#        </div>#}
    {#    </form>#}
{% endblock %}

{% block after %}
    <script type="text/javascript">
        $(document).ready(function () {
            $('#toggle-advanced').click(function() {
                $('#advanced-search').toggle();
            });

        });
    </script>
{% endblock %}
