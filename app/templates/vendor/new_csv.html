{% extends 'layouts/base.html' %}
{% import 'macros/form_macros.html' as f %}

{% block scripts %}
{% endblock %}

{% block content %}
<div class="ui stackable centered grid container">
    <div class="six wide column">
        <a class="ui basic compact button" href="{{ url_for('vendor.index') }}">
            <i class="caret left icon"></i>
            Back to dashboard
        </a>

        <h2 class="ui header">
            Upload CSV
        </h2>

        {% set flashes = {
        'error': get_flashed_messages(category_filter=['form-error']),
        'warning': get_flashed_messages(category_filter=['form-check-email']),
        'info': get_flashed_messages(category_filter=['form-info']),
        'success': get_flashed_messages(category_filter=['form-success'])
        } %}

        {{ f.begin_form(form, flashes) }}

        {{ f.render_form_field(form.file_upload) }}


        {{ f.form_message(flashes['error'], header='Something went wrong.', class='error') }}
        {{ f.form_message(flashes['warning'], header='Check your item information.', class='warning') }}
        {{ f.form_message(flashes['info'], header='Information', class='info') }}
        {{ f.form_message(flashes['success'], header='Success!', class='success') }}

        {% for field in form | selectattr('type', 'equalto', 'SubmitField') %}
        {{ f.render_form_field(field) }}
        {% endfor %}

        {{ f.end_form() }}
    </div>
    <div class="six wide column">
        <table id="listing_table" class="ui celled table">
            <thead>
            <tr>
                <th>Item Name</th>
                <th>Price</th>
                <th>Description</th>
                <th>Category</th>
                <th>Status</th>
            </tr>
            </thead>
            <tbody>
            {% for listing in listings %}
            <tr class="positive">
                <td>{{listing.name}}</td>
                <td>{{listing.price}}</td>
                <td>{{listing.description}}</td>
                <td>{{listing.Category}}</td>
                <td><i class="icon checkmark "></i> Submitted Successfully</td>
            </tr>
            {% endfor %}
            </tbody>
            <tfoot>
            <tr>
                <th colspan="3">
                    <div class="ui right floated pagination menu">
                        <a class="icon item">
                            <i class="left chevron icon"></i>
                        </a>
                        <a class="item">1</a>
                        <a class="icon item">
                            <i class="right chevron icon"></i>
                        </a>
                    </div>
                </th>
            </tr>
            </tfoot>
        </table>

    </div>
</div>
<script>
   $("#listing_table").hide()
   $( document ).ready(function() {
    {% if listings %}
       $("#listing_table").show()
    {% endif %}
});
</script>

{% endblock %}
